# DO NOT EDIT THIS FILE DIRECTLY
# ALL CHANGES MUST GO THROUGH PULL REQUESTS
# MALFORMED FILE CONTENTS WILL BREAK THE SITE BUILD

- version: "2.32.1"
  date: 2016-12-24
  lts_predecessor: "2.19.4"
  lts_baseline: "2.32"
  lts_changes:
    - type: major rfe
      message: >
        Upgrade Remoting to version 3.1 with <a href="https://github.com/jenkinsci/remoting/blob/master/docs/protocols.md#jnlp4-connect">JNLP4-connect protocol</a>.
        <a href="https://github.com/jenkinsci/remoting/blob/master/docs/remoting-3-compatibility.md">Compatibility notes are available here</a>.
        Notably, it is no longer possible to use JDK 6 for the Maven project type, as communication with the Maven process uses Remoting, and it now requires Java 7.
      references:
        - issue: 37564
        - issue: 36871
        - issue: 37565
    - type: major rfe
      message: Show notification with popup on most pages when administrative monitors are active.
      issue: 38391
    - type: rfe
      message: Allow disabling/enabling administrative monitors on Configure Jenkins form.
      issue: 38301
    - type: rfe
      message: Ask for confirmation before canceling/aborting runs.
      issue: 30565
    - type: rfe
      message: Prompt user whether to add the job to the current view.
      issue: 19142
    - type: rfe
      message: >
        Allow <code>CommandInterpreter</code> build steps to set a build result as <em>Unstable</em> via the return code.
        Shell and Batch build steps now support this feature.
      issue: 23786
    - type: rfe
      message: >
        Internal: Upgrade Stapler library from 1.243 to 1.246 with fixes required for the Blue Ocean project.
        Changes are listed <a href="https://github.com/stapler/stapler/compare/stapler-parent-1.243...stapler-parent-1.246">here</a>.
      pull: 2593
  changes:
    - type: major bug
      message: >
        Prevent early deallocation of process references by Garbage Collector when starting a remote process.
        It was sometimes causing build failures with messages like <code>FATAL: Invalid object ID 184 iuota=187</code> and <code>java.lang.Exception: Object was recently deallocated</code>.
      issue: 23271
    - type: bug
      message: Redirect to login page in the case of authorisation error when checking connectivity to the Update Center.
      issue: 39741
    - type: bug
      message: >
        WinP 1.24: Native class now tries loading DLLs from the temporary location.
      issue: 20913
    - type: bug
      message: >
        WinP 1.24: WinP sometimes kills wrong processes when using <code>killRecursive()</code>.
        It was likely impacting process termination on Windows agents and sometimes leading to BSoD.
      issue: 24453
- version: "2.32.2"
  date: 2017-02-01
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-02-01/
          title: security advisory
    - type: major rfe
      message: Support displaying of warnings from the update site in the plugin manager and in administrative monitors.
      references:
        - issue: 40494
        - url: https://jenkins.io/blog/2017/01/10/security-warnings/
          title: announcement blog post
    - type: bug
      message: Correctly state that Jenkins will refuse to load plugins whose dependencies are not satisfied in plugin manager.
      issue: 40666
    - type: bug
      message: The <tt>install-plugin</tt> CLI command now correctly installs plugins when multiple file arguments are specified.
      issue: 32358
    - type: bug
      message: >
        Prevent the <code>ClassNotFoundException: javax.servlet.ServletException</code> error when invoking shell tasks on remote agents.
      issue: 40863
    - type: bug
      message: Properties were not passed to Maven command by Maven build step when the <em>Inject Build Variables</em> flag was not set.
      issue: 39268
    - type: bug
      message: Job configuration submission now does not fail when there is no parameters property.
      issue: 39700, regression in 1.637
    - type: bug
      message: Update Remoting to 3.4 in order to properly terminate the channel in the case <code>Errors</code> and <code>Exception</code>s.
      issue: 39835
    - type: bug
      message: <em>Check for Updates</em> button in the Plugin Manager was hidden in the <em>Updates</em> tab when there was no plugins updates available.
      issue: 39971
    - type: bug
      message: >
        SSHD Module: Handshake was failing (wrong shared secret) 1 out of 256 times due to <a href="https://issues.apache.org/jira/browse/SSHD-330">SSHD-330</a>.
      issue: 40362
    - type: bug
      message: >
        Performance: Use bulk change when submitting Job configurations to minimize the number of sequential <code>config.xml</code> write operations.
      issue: 40435
    - type: bug
      message: Jobs were hanging during process termination on the Solaris 11 Intel platform, regression in 2.20.
      issue: 40470
    - type: bug
      message: Restore option value for setting build result to unstable when loading shell and batch build steps from disk.
      issue: 40894
    - type: rfe
      message: >
        Update to Winstone 3.2 to support ad-hoc certificate generation on Java 8 (using unsupported APIs).
        <strong>This option is deprecated and will be removed in a future release.</strong>
        We strongly recommend you create self-signed certificates yourself and use <tt>--httpsKeyStore</tt> and related options instead.
      issue: 25333
- version: "2.32.3"
  date: 2017-03-01
  changes:
    - type: bug
      message: >
        Display an informative message, rather than a Groovy exception, when <code>View#getItems</code> fails.
      issue: 41825
      pull: 2739
    - type: bug
      message: Don't try to set Agent Port when it is enforced, breaking form submission.
      issue: 41511
      pull: 2726
    - type: bug
      message: Don't add all group names as HTTP headers on "access denied" pages, possibly breaking reverse proxies due to very large headers.
      issue: 39402
      pull: 2727
    - type: bug
      message: Fix handling of the <tt>POST</tt> flag in <code>ManagementLink</code>s within the Manage Jenkins page.
      issue: 38175
      pull: 2692
    - type: bug
      message: <code>IllegalStateException</code> from Winstone when making certain requests with access logging enabled.
      issue: 37625
      pull: 2721
    - type: bug
      message: Do not fail to write a log file just because something deleted the parent directory.
      issue: 16634
      pull: 2738
- version: "2.46.1"
  date: 2017-03-29
  lts_predecessor: "2.32.3"
  lts_baseline: "2.46"
  lts_changes:
    - type: rfe
      message: >
        Update the <a href="https://github.com/jenkinsci/sshd-module">SSHD module</a> from 1.7 to 1.8.
        The change disables obsolete Ciphers: AES128CBC, TripleDESCBC, and BlowfishCBC.
    - type: rfe
      message: Enable the JNLP4 agent protocol by default.
      references:
        - issue: 40886
        - url: https://github.com/jenkinsci/remoting/blob/master/docs/protocols.md#jnlp4-connect
          title: upgrade notes
    - type: rfe
      message: >
        Allow defining agent ping interval and ping timeout in seconds. It can be done via the
        <code>hudson.slaves.ChannelPinger.pingIntervalSeconds</code> and
        <code>hudson.slaves.ChannelPinger.pingTimeoutSeconds</code>
        system properties.
      issue: 28245
    - type: rfe
      message: Print stack traces in logical order, with the most important part on top.
      pull: 1485
    - type: rfe
      message: Reduce size of Jenkins WAR file by not storing identical copies of <code>remoting.jar</code>/<code>slave.jar</code> there.
      pull: 2633
    - type: rfe
      message: Do not print warnings about undefined parameters when <code>hudson.model.ParametersAction.keepUndefinedParameters</code> property is set to <code>false</code>.
      pull: 2687
    - type: rfe
      message: Increase the <code>JENKINS_HOME</code> disk space threshold from 1 GB to 10 GB left. The warning will be shown only if more than 90% of the disk is utilized.
      issue: 40749
    - type: bug
      message: Delete obsolete pinning UI.
      issue: 34065
    - type: bug
      message: Use project-specific validation URL for SCM Trigger, so <code>H</code> is handled correctly in preview.
      issue: 26977
    - type: bug
      message: Failure to serialize a single <code>Action</code> could cause an entire REST export response to fail. Upgraded to Stapler 1.250 with a fix.
      issue: 40088
    - type: bug
      message: Add Usage Statistics section to the global configuration to make it easier to find.
      issue: 32938
    - type: bug
      message: Allow <tt>groovy</tt> CLI command via SSH CLI.
      issue: 41765

  changes:
    - type: bug
      message: >
        Prevent file descriptor leaks when Windows Service installer fails to read data from the service startup log.
      issue: 42670
      pull: 2793
    - type: bug
      message: >
        Update Remoting from 3.5 to 3.7
        in order to prevent file descriptor leaks on agents in the case of multiple connection attempts.
      references:
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#37
          title: full changelog
      issue: 42371
      pull: 2773
    - type: bug
      message: Exceptions during Jenkins cleanup step should not block restart.
      issue: 42164
    - type: bug
      message: Cryptic error message when loading JnlpSlaveAgentProtocol4.
      issue: 41987
    - type: bug
      message: >
        Developer: Snapshot builds of plugins that had dependencies on other snapshot builds were not having their version numbers compared correctly.
      issue: 41899
    - type: bug
      message: Do not attempt to find the next occurrence of an impossible date such as June 31st in validation of trigger schedules.
      issue: 41864
      pull: 2759
    - type: bug
      message: >
        Remoting 3.5: Stability improvements.
      references:
        - issue: 41513
        - issue: 41852
    - type: bug
      message: Remove invalid translations in Slovene
      issue: 41756
      pull: 2767
    - type: rfe
      message: >
        Remoting 3.5: Add option to specify the Remoting protocol to use on the client.
      issue: 41730
    - type: bug
      message: Use of the remote API to create items in views (<tt>/view/â€¦/createItem</tt>) didn't actually add items to views since Jenkins 2.22.
      issue: 41128
      pull: 2760
    - type: bug
      message: >
        Remoting 3.5: Remoting clients now accept lowercase (HTTP 2) headers sent by reverse proxies.
      issue: 40710
    - type: bug
      message: Windows service restart did not retain build queue.
      issue: 32820
- version: "2.46.2"
  date: 2017-04-26
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-04-26/
          title: security advisory
    - type: major rfe
      message: >
        Non-Remoting-based CLI.
      references:
        - issue: 41745
        - pull: 2795
        - url: /blog/2017/04/11/new-cli/
          title: announcement blog post
    - type: rfe
      message: >
        Disable SSH server by default.
      issue: 33595
    - type: bug
      message: <code>Computer#addAction</code> would throw an <code>UnsupportedOperationException</code> since Jenkins 2.30. Such a call site was released in SSH Slaves Plugin 1.15 for SECURITY-161.
      references:
        - issue: 42969
        - url: https://jenkins.io/security/advisory/2017-03-20/
          title: security advisory including SECURITY-161
      pull: 2819
    - type: bug
      message: Search results page did not correctly encode query parameters.
      issue: 42390
      pull: 2781
    - type: bug
      message: >
        When validating a cron expression, consider the specified time zone.
      pull: 2824
      issue: 43228
    - type: bug
      message: >
        Do not display a warning when an SCM trigger has no schedules (either to disable SCM post-commit hooks, or to enable them without polling).
      issue: 42194
      pull: 2758
    - type: bug
      message: Fix performance issue in deduplication of lists of tool installers.
      issue: 42141
      pull: 2752
- version: "2.46.3"
  date: 2017-05-25
  changes:
    - type: bug
      message: >
        If an exception is thrown while rendering an HTTP response, just log the stack trace on the server side, without trying to send an error page to the client.
      issue: 21695
      pull: 2834
    - type: bug
      message: >
        Setup wizard gets into bad state when failures like network issues happen.
      issue: 41778
      pull: 2825
    - type: bug
      message: >
        Catch and log <code>RuntimeException</code> in <code>Computer#setNode()</code> when updating the Computer list.
      issue: 42043
      pull: 2836
    - type: bug
      message: >
        Fix <tt>AccessDeniedException</tt> in "Build after other projects are built" when user has Discover permission but not Read.
      issue: 42707
      pull: 2846
    - type: bug
      message: >
        Prevent <code>NullPointerException</code> when a non-existent default view is specified in <em>Configure System</em>.
      issue: 42717
      pull: 2815
    - type: bug
      message: >
        Properly handle saving system configuration when disabling all, or all but one, administrative monitors.
      issue: 42852
      pull: 2828
    - type: bug
      message: >
        Remove links in stack traces to the <tt>stacktrace.jenkins-ci.org</tt> service that has been shut down.
      issue: 42861
      pull: 2811
    - type: bug
      message: >
        Ensure that <code>Cloud.PROVISION</code> is properly initialized during the configuration loading.
      issue: 43279
      pull: 2835
    - type: rfe
      message: >
        Migrate legacy users only once per restart to improve performance of the user retrieval logic.
      pull: 2862
      issue: 43936
    - type: bug
      message: Prevent rare <code>NullPointerException</code> if an admin user is created in the setup wizard after first disabling CSRF protection.
      pull: 2868
      issue: 44010

- version: "2.60.1"
  date: 2017-06-21
  lts_predecessor: "2.46.3"
  lts_baseline: "2.60"
  banner: >
    <strong>2.60.1 is the first Jenkins LTS release that requires Java 8 to run.</strong>
    If you're using the Maven Project type, please note that it needs to use a JDK capable of running Jenkins, i.e. JDK 8 or up.
    If you configure an older JDK in a Maven Project, Jenkins will attempt to find a newer JDK and use that automatically.
    If your SSH Slaves fail to start and you have the plugin install the JRE to run them, make sure to update SSH Slaves Plugin to at least version 1.17 (1.20 recommended).
  lts_changes:
    - type: major rfe
      message: >
        <strong>Jenkins (master and agents) now requires Java 8 to run.</strong>
      references:
        - issue: 27624
        - issue: 42709
        - pull: 2802
        - url: /blog/2017/04/10/jenkins-has-upgraded-to-java-8/
          title: announcement blog post
    - type: bug
      message: >
        Update Groovy to 2.4.8 to address memory leak issue.
        <strong><em>Pipeline: Groovy</em> needs to be upgraded to 2.28 or higher to prevent regressions.</strong>
      references:
        - issue: 33358
        - issue: 42189


    # WINDOWS SERVICES START
    - type: major rfe
      message: >
        Upgrade the Windows Agent Installer module from 1.6 to 1.7.
        This change picks major updates in Windows service management logic.
      references:
        - url: https://github.com/jenkinsci/windows-slave-installer-module/blob/master/CHANGELOG.md#17
          title: full changelog
        - url: https://github.com/jenkinsci/windows-slave-installer-module#upgrading-old-agents
          title: guide to upgrading old Windows service agents
      pull: 2765
    - type: major rfe
      message: >
        Windows services:
        Upgrade the bundled <a href="https://github.com/kohsuke/winsw">Windows Service Wrapper</a> from 1.18 to 2.0.2.
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/CHANGELOG.md
          title: full changelog
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Enable <a href="https://github.com/kohsuke/winsw/blob/master/doc/extensions/runawayProcessKiller.md">Runaway Process Killer</a>
        by default in new Agent and Master installations.
      issue: 39231
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Enable auto-upgrade of Remoting on newly installed agents if they are connected by HTTPS.
      issue: 39237
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Add support of shared directories mapping in Windows agent services.
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/doc/extensions/sharedDirectoryMapper.md
          title: Shared Directory Mapper documentation
      issue: 23487
      pull: 2765
    - type: bug
      message: >
        Windows services:
        Integrate various stability and performance fixes in <a href="https://github.com/kohsuke/winsw">Windows Service Wrapper</a>
        from 1.18 to 2.0.2.
        There are many fixes around configuration options and process termination.
      pull: 2765
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/CHANGELOG.md
          title: full changelog
    # WINDOWS SERVICES END

    # PACKAGING START
    - type: bug
      message: >
        Packaging:
        Do not invoke recursive <code>chown</code> in <code>JENKINS_HOME</code> during the RPM post-install step unless owned by a different user.
      issue: 23273
    # PACKAGING END

    # SEARCH START
    - type: rfe
      message: >
        Use case-insensitive search by default for new and anonymous users.
      pull: 2801
      issue: 42645
    - type: rfe
      message: >
        Searching in the Build History widget takes into account user preferences (case sensitivity by default).
      pull: 2683
    - type: rfe
      message: >
        Allow searching by build parameter values in the Build History widget.
      issue: 40718
      pull: 2683
    # SEARCH END


    - type: rfe
      message: >
        Update the Trilead SSH library to get support of new Mac, Key, and Key Exchange Algorithms.
      references:
        - issue: 33021
        - issue: 26379
        - issue: 31549
        - issue: 42959
        - issue: 43979
        - issue: 44046
      pull: 2848
      # Included issue reference to followup fix in pull 2872
    - type: rfe
      message: >
        When creating temporary files, use the <code>jenkins</code> prefix instead of the old <code>hudson</code> one.
      pull: 2778


    # LOCALIZATIONS START
    - type: rfe
      message: Update German, French and Russian localizations.
      references:
        - pull: 2777
        - pull: 2787
        - pull: 2798
    - type: rfe
      message: >
        Removed localizations with very low coverage: Albanian, Basque, Belarusian, Bengali, Esperanto, Galician, Georgian, Gujarati, Hindi, Icelandic, Indonesian, Irish, Kannada, Macedonian, Marathi, Mongolian, Occitan, Punjabi, Sinhala, Tamil, Telugu, Thai.
      pull: 2813
    # LOCALIZATIONS END

    - type: rfe
      message: >
        Internal API:
        Add the ability for <code>ItemListener</code> to veto copy operations;
        make <code>Run#compareTo</code> work across jobs;
        save <code>Jenkins</code> after calling <code>setSecurityRealm</code> or <code>setAuthorizationStrategy</code>.
      references:
        - issue: 34691
        - issue: 42319
        - pull: 2762
        - pull: 2782
        - pull: 2790
        - pull: 2805
  changes:
    - type: bug
      message: >
        Fix for <code>NullPointerException</code> while initiating some SSH connections (regression in 2.59).
      issue: 44120
      pull: 2888
- version: "2.60.2"
  date: 2017-07-19
  changes:
    - type: rfe
      message: >
        Allow overriding the Jenkins session ID suffix so it doesn't change on every restart, possibly resulting in too many cookies.
      pull: 2917
      references:
        - url: https://github.com/jenkinsci/extras-executable-war#jetty-session-ids
          title: how to set session ID
        - issue: 25046
        - issue: 44894
    - type: bug
      message: >
        Add documentation for time zone specification for cron patterns (e.g. SCM polling).
      issue: 9283
      pull: 2927
    - type: bug
      message: >
        Do not submit form when pressing <kbd>Enter</kbd> in the plugin manager's filter field.
      pull: 2902
      issue: 44523
    - type: bug
      message: >
        Jenkins failed to perform some cleanup tasks, including saving the build queue, if stopped via REST <tt>/exit</tt>,
        CLI <tt>shutdown</tt>, or when restarting from <em>Install as Windows Service</em>.
      pull: 2908
      issue: 44589
    - type: bug
      message: >
        Don't check whether disabled administrative monitors are active or not on the <em>Manage Jenkins</em> page.
      issue: 44608
      pull: 2909
    - type: bug
      message: >
        When starting the <code>jenkins.war</code> directly, properly check for Java 8 as minimum instead of Java 7 before proceeding.
      issue: 44764
      pull: 2917
    - type: bug
      message: >
        Prevent <code>NullPointerException</code> when calling <code>restart</code> CLI command (regression in 2.57).
      issue: 44769
      pull: 2912
    - type: bug
      message: >
        Prevent possible <code>NullPointerException</code> when listing remote directories using the <code>FilePath#list()</code> and <code>FilePath#listDirectories()</code> APIs.
      pull: 2914
      issue: 44942
- version: "2.60.3"
  date: 2017-08-17
  changes:
    - type: bug
      message: >
        Contributions to the PATH environment variable could result in malformed values on agents on a platform different from master's.
      issue: 14807
      pull: 2936
    - type: bug
      message: >
        Robustness improvements related to agent connections.
      references:
        - issue: 43496
        - issue: 38527
      pull: 2922
      # also pull: 2923
    - type: bug
      message: >
        JNLP for launching agents now requests Java 8.
      pull: 2944
      issue: 45679
    - type: bug
      message: >
        Prevent <tt>NullPointerException</tt> in <code>Jenkins#getRootURL()</code> while the instance is not fully loaded yet.
      issue: 34914
      pull: 2935
    - type: bug
      message: >
        Fix <tt>NullPointerException</tt> when calculating culprits.
      issue: 45516
      pull: 2941
    - type: rfe
      message: >
        The <code>reload-configuration</code> CLI command now waits until the reload is finished, and returns an error code if the reload failed.
      issue: 45256
      pull: 2931
    - type: rfe
      message: >
        Remove the "JNLP" protocol references from the TCP Agent Listener log messages.
      issue: 44103
      pull: 2896
- version: "2.73.1"
  date: 2017-09-13
  lts_predecessor: "2.60.3"
  lts_baseline: "2.73"
  banner: >
    Two regressions since the previous LTS release have been identified in 2.73.1.
    One involved Remoting (agent) connections and the other concerns failures to use passphrase-protected ed25519 SSH keys.
    Please see <a href="/doc/upgrade-guide/2.73/#upgrading-to-jenkins-lts-2-73-1"> the LTS upgrade guide for 2.73.1</a> for more information.
  lts_changes:
  #### updated components and libraries
  # Groovy
    - type: major rfe
      message: >
        Upgrade Groovy from 2.4.8 to 2.4.11.
      references:
        - url: http://groovy-lang.org/changelogs/changelog-2.4.9.html
          title: Groovy 2.4.9 changelog
        - url: http://groovy-lang.org/changelogs/changelog-2.4.10.html
          title: Groovy 2.4.10 changelog
        - url: http://groovy-lang.org/changelogs/changelog-2.4.11.html
          title: Groovy 2.4.11 changelog
        # pull: 2814

    # Winstone-Jetty
    - type: major rfe
      message: >
        Integration of Winstone 4: Upgrade bundled Jetty from 9.2.15.v20160210 to 9.4.5.v20170502.
        <strong>This removes support for the deprecated SPDY protocol.
        The <tt>--spdy</tt> parameter has been removed accordingly and Jenkins may refuse to start if it's set.</strong>
      pull: 2850
      issue: 43713
      references:
        - title: full changelog
          url: "https://github.com/jenkinsci/winstone/blob/master/CHANGELOG.md#40"
    - type: bug
      message: >
        Jetty 9.4.5:
        Prevent the <i>400 Bad Host header</i> error for <code>HttpChannelOverHttp</code> when operating behind reverse proxy.
      pull: 2850
      references:
        - issue: 40693
        - title: corresponding Jetty issue
          url: "https://github.com/eclipse/jetty.project/issues/592"
    - type: rfe
      message: >
        Winstone 4.1: Add Jetty HTTP/2 connector and corresponding options for Winstone-Jetty.
      references:
        - issue: 45438
        - url: https://github.com/jenkinsci/winstone#http2-support
          title: enabling HTTP/2 support in Winstone-Jetty
      pull: 2937

    # remoting
    - type: major rfe
      message: >
        Update Remoting from 3.7 to 3.10 adding opt-in support for work directories and improving logging in Jenkins agents.
      references:
        - title: work directory documentation
          url: https://github.com/jenkinsci/remoting/blob/master/docs/workDir.md
        - title: logging documentation
          url: https://github.com/jenkinsci/remoting/blob/master/docs/logging.md
        - title: remoting changelog
          url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#38
        - issue: 39370
    - type: rfe
      message: >
        Enable Remoting work directories by default for newly created agents launched via JNLP (Java Web Start Launcher).
      pull: 2945
      references:
        - issue: 44112
        - url: https://github.com/jenkinsci/remoting/blob/master/docs/workDir.md
          title: feature documentation

    # SSHD
    - type: major rfe
      message: >
        SSHD Module 2.0: Update from SSHD Core 0.14.0 to Apache MINA SSHD 1.6.0 in Jenkins core and Jenkins CLI.
      references:
        - title: changelog
          url: https://github.com/jenkinsci/sshd-module/blob/master/CHANGELOG.md#20
        - title: plugin compatibility notice
          url: https://github.com/jenkinsci/sshd-module/blob/master/CHANGELOG.md#20-compatibility-notice
        - issue: 43668
      pull: 2853
    - type: rfe
      message: >
        SSHD Module 2.0: Enable aes192ctr and aes256ctr ciphers if JVM supports unlimited-strength encryption.
      issue: 39738
      pull: 2853

    # Windows process library
    - type: rfe
      message: >
        Update WinP from 1.24 to 1.25 to improve performance and diagnostics
        of issues like <a href="https://issues.jenkins-ci.org/browse/JENKINS-30782">JENKINS-30782</a>.
      pull: 2893
      references:
        - title: full changelog
          url: "https://github.com/kohsuke/winp/blob/master/CHANGELOG.md#125"

    # posix-jnr
    - type: bug
      message: >
        Update jnr-posix from 3.0.1 to 3.0.41 to pick up improvements and fixes in the POSIX platforms support.
      pull: 2904


    #### Pipeline issues
    - type: rfe
      message: Freestyle projects may now list Pipeline jobs as downstream and trigger them, without needing to use the Parameterized Trigger plugin or reverse triggers ("Build after other projects are built").
      issue: 28113
      pull: 2873
    - type: rfe
      message: >
        Internal: Define enabling/disabling in <code>ParameterizedJob</code> rather than <code>AbstractProject</code>.
      issue: 27299
      pull: 2866
    - type: rfe
      message: >
        Fixed Pipeline compatibility for a number of CLI commands (<tt>delete-builds</tt>, <tt>list-changes</tt>, <tt>console</tt>, <tt>set-build-description</tt>, and <tt>set-build-display-name</tt>),
        as well as some issues affecting error reporting in other commands when used with Pipeline.
      pull: 2874
      references:
        - issue: 30785
        - issue: 41527
    - type: rfe
      message: >
        Enable simpler syntax for <code>upstream</code> build trigger in pipelines.
      issue: 34464
      pull: 2895
    - type: rfe
      message: >
        Minor optimization to queue maintenance routines and printing of console notes, mainly for the benefit of Pipeline node blocks.
      issue: 45553
      pull: 2947 # and 2948

    ##### Authorize project
    - type: rfe
      message: >
        If you have the Authorize Project plugin installed and configured, its configuration will now be treated as final with respect to the behavior of <em>Job/Build</em> checks from <strong>Build other projects</strong> and <strong>Build after other projects are built</strong>.
        Formerly, if a <strong>Per-project configurable Build Authorization</strong> was enabled globally but some projects did not specify an <strong>Authorization</strong>, the two aforementioned checks would automatically fall back to checking as anonymous (typically denying build permission).
        To restore the former behavior, explicitly configure a <strong>Project default Build Authorization</strong> to be <strong>Run as anonymous</strong>.
        Note that this will affect all build-scoped permission checks, including for example <em>Agent/Build</em>.
      issue: 22949
      pull: 2881
    - type: rfe
      message: >
        Internal API: <code>Tasks.getAuthenticationOf</code> now honors authentication contributed by <code>QueueItemAuthenticatorProvider</code> extensions.
      pull: 2880

    #### Misc issues
    - type: rfe
      message: >
        Moved agent port and protocol configuration out of "security" (authentication and authorization) block in Configure Global Security.
      issue: 4478
      pull: 2900
    - type: rfe
      message: >
        Don't reload user records from disk unless explicitly requested to improve performance of user record access.
      issue: 45737
      pull: 2928

    #### Development / internal
    - type: rfe
      message: >
        Plugin Development: Jenkins now no longer publishes a <code>war-for-test</code> artifact.
        Plugins using 2.64 or a later version of Jenkins (including 2.73.1) as baseline need to use plugin parent POM 2.30 or later.
      pull: 2899
      issue: 24064
  changes:
    - type: rfe
      message: >
        Update Windows service wrapper from 2.1.0 to 2.1.2 and Windows Agent Installer from 1.9 to 1.9.1.
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/CHANGELOG.md
          title: Windows service wrapper changelog
        - url: https://github.com/jenkinsci/windows-slave-installer-module/blob/master/CHANGELOG.md
          title: Windows agent installer changelog
        - pull: 2987
        - issue: 46282
    - type: rfe
      message: >
        Log name of the executor thread that died to improve diagnosability.
      issue: 42376
      pull: 2970
    - type: bug
      message: >
        Prevent caching of the item categories list by the browser to prevent stale data.
      pull: 2973
      issue: 43848
    - type: bug
      message: >
        Improve robustness of the reverse build trigger ("Build after other projects are built").
      pull: 2966
      issue: 45909
    - type: bug
      message: >
        Include culprits in XML and JSON API again (regression in 2.60).
      issue: 46082
      pull: 2978
    - type: bug
      message: >
        Button to validate proxy configuration in Manage Plugins now works correctly with NTLM authorization.
      pull: 2984
      issue: 46288
- version: "2.73.2"
  date: 2017-10-11
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-10-11/
          title: security advisory
    - type: major bug
      message: >
        Fix random failures to use passphrase-protected ed25519 SSH private keys (regression in 2.73).
      issue: 46754
      pull: 3026
    - type: major bug
      message: >
        Update Remoting library from 3.10 to 3.10.2 to fix regression in Jenkins 2.68 when using non-writable home directories.
      references:
        - issue: 45755
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#3102
          title: full changelog
        - url: https://jenkins.io/doc/upgrade-guide/2.73/#known-issue-agent-connection-failures-involving-jenkins-masters-with-undefined-or-non-writable-home-directory
          title: issue description in 2.73.1 upgrade guide
      pull: 3025
    - type: major rfe
      message: >
        Update Remoting from 3.10 to 3.10.2 to improve stability and diagnosability.
      references:
        - issue: 45023
        - issue: 45233
        - issue: 46259
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#3102
          title: full changelog
- version: "2.73.3"
  date: 2017-11-08
  changes:
    - type: security
      message: Security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-11-08/
          title: security advisory
    - type: major bug
      issue: 47448
      pull: 3093
      message: >
        Fix <em>Download from java.sun.com</em> installation method for JDK for downloads requiring an Oracle login after change to the Oracle site.
    - type: bug
      message: >
        Fix potential HTTP 414 error in form validation of long Batch/Shell tool installer scripts.
      issue: 47058
      pull: 3037
    - type: bug
      message: >
        Properly display agent launch arguments when using nested launch methods.
      issue: 47056
      pull: 3034
    - type: bug
      message: >
        Disconnect node on ping timeout instead of leaving the channel half open.
      pull: 3005
      issue: 46680
    - type: bug
      message: >
        Avoid a possible server-side timeout on long-running CLI commands using plain HTTP mode by sending periodic pings from the client.
      pull: 3011
      issue: 46659
- version: "2.89.1"
  date: 2017-12-06
  lts_predecessor: "2.73.3"
  lts_baseline: "2.89"
  banner: >
    Upgrading to Jenkins 2.89.1 does not install the <em>Command Launcher</em> plugin (see below) as it should. If you're using the <em>Launch agent via execution of command on the master</em> launch method for agents, or cloud provider plugins, make sure to manually install the plugin after upgrading, and restart Jenkins afterwards.
  lts_changes:
    - type: major rfe
      pull: 3076
      message: >
        <em>Launch agent via execution of command on the master</em> has been moved to a new <em>Command Launcher</em> plugin and integrated with the <em>Script Security</em> plugin.
      references:
        - issue: 47393
        - url: https://plugins.jenkins.io/command-launcher
          title: Command Launcher plugin site entry
        - url: https://jenkins.io/security/advisory/2017-10-11/#arbitrary-shell-command-execution-on-master-by-users-with-agent-related-permissions
          title: related security advisory
    - type: major bug
      message: >
        Prevent core or plugin code from mistakenly attempting to serialize jobs, builds, and users except in their intended top-level XML file positions, preventing a class of serious deserialization-related errors.
      issue: 45892
      pull: 2957
    - type: major bug
      message: >
        Developer: Fix <code>TimeDuration</code> time unit handling and its incorrect usage.
        <code>TimeDuration</code> uses milliseconds as the default unit.
        It was supposed to parse <code>sec</code> or <code>secs</code> suffix to interpret the number as seconds, but that never worked.
      issue: 44052
      pull: 3043

    # Stapler
    - type: major rfe
      message: >
        Upgrade Stapler library from 1.250 to 1.253.
      references:
        - pull: 2956
        - url: https://github.com/stapler/stapler/blob/master/CHANGELOG.md
          title: Stapler changelog
    - type: major bug
      message: >
         Stapler 1.252: Prevent file handle leak in <code>LargeText#GzipAwareSession</code>.
      issue: 45903
      pull: 2956
    - type: bug
      message: >
        Stapler 1.252: Restore ability to attach views to interfaces (regression in Jenkins 2.46).
      issue: 43715
      pull: 2956
    - type: rfe
      message: >
        Stapler 1.253: Servlet 3.1 support, improved Blue Ocean performance and changes of interest to plugin developers.
      references:
        - issue: 37062
        - url: https://github.com/stapler/stapler/blob/master/CHANGELOG.md#1253
          title: Stapler changelog
      pull: 3033

    # Remoting
    - type: major rfe
      message: > # from 3.10.2 to 3.13 for the baseline, but from 3.10.3 in 2.73.3 to 3.14 in 2.89.1 effectively
        Update Remoting to improve stability and diagnosability.
      references:
        - issue: 37567
        - issue: 43985
        - issue: 45522
        - issue: 47132
        - issue: 38711
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#313
          title: full changelog
      pull: 2988
    - type: rfe
      message: >
        Disable obsolete JNLP, JNLP2, and CLI protocols on new Jenkins installations during Setup Wizard.
      references:
        - issue: 45841
        - url: /blog/2017/08/11/remoting-update/
          title: announcement blog post
      pull: 2950
    - type: rfe
      message: >
        Restart agent communication related threads on both master and agents when encountering an unhandled exception, if possible, to improve stability.
      issue: 38711
      pull: 3017 # and 3061


    # Misc
    - type: rfe
      message: >
        Default the built-in Jenkins Update Center URL to <code>https://updates.jenkins.io</code> instead of obsolete HTTP endpoint.
        <strong>This requires a JRE compatible with <a href="https://letsencrypt.org/docs/certificate-compatibility/#known-compatible">Let's Encrypt</a>, e.g. Oracle JRE 8u101.</strong>
      pull: 2996
    - type: rfe
      message: >
        Moved Jenkins agent runtime to <code>agent.jar</code> file name, and deprecate (but still support) use of legacy <code>slave.jar</code>.
        Introduce the <code>AGENTJAR_URL</code> environment variable as replacement for <code>SLAVEJAR_URL</code>.
      pull: 3004
      issue: 35451
    - type: rfe
      message: >
        Improve error reporting when failing to archive artifacts.
      pull: 2976
    - type: rfe
      message: >
        Enable <code>cc.xml</code> to export jobs in folders recursively when accessed with a query parameter named <code>recursive</code>.
      pull: 3060 # and 3081
      issue: 36282
    - type: rfe
      message: >
        Add new administrative monitor warning users about disabled CSRF protection.
      issue: 47372
      pull: 3072
    - type: rfe
      message: >
        Commons Codec library upgraded from 1.8 to 1.9.
      pull: 3033
    - type: rfe
      message: >
        Agents JVM must be 1.8+ and a clear message is shown in connection logs if it is not.
      pull: 2915
      issue: 44851
    - type: rfe
      message: >
        Add sidebar link to create new view.
      pull: 3086
      issue: 6290

  changes:
    - type: major bug
      message: >
        Recover from legacy user configuration folders with <code>$</code> characters that are not part of hex escape sequences. (Regression in 2.89)
      issue: 47909
      pull: 3134
    - type: major bug
      issue: 47448
      pull: 3093
      message: >
        Fix <em>Download from java.sun.com</em> installation method for JDK for downloads requiring an Oracle login after change to the Oracle site.
    - type: rfe
      message: >
        Update Remoting from 3.13 to 3.14 in order to apply various performance and stability improvements.
      pull: 3138
      references:
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#314
          title: full changelog
        - issue: 37566
        - issue: 45294
        - issue: 47425
        - issue: 47901
        - issue: 47942
    - type: rfe
      message: >
        Update Windows Agent Installer from 1.9.1 to 1.9.2:
        Do not try to update <code>jenkins-slave.exe</code> on Unix agents when they connect.
      pull: 3130
      references:
        - url: https://github.com/jenkinsci/windows-slave-installer-module/blob/master/CHANGELOG.md#192
          title: full changelog
        - issue: 47015
    - type: bug
      message: >
        Prevent caching of captcha on the login form.
      pull: 3126
      issue: 43852
- version: "2.89.2"
  date: 2017-12-14
  changes:
    - type: security
      message: >
        Security fixes.
      references:
        - url: /security/advisory/2017-12-14/
          title: security advisory
        - url: /blog/2017/12/14/security-update/
          title: announcement blog post
- version: "2.89.3"
  date: 2018-01-18
  changes:
    - type: major bug
      pull: 3193 # and its #3201 regression
      issue: 48365 # and its 48604 regression
      message: >
        Make sure detached plugins (plugins whose functionality used to be part of Jenkins itself) are installed when upgrading Jenkins past the version at which the plugin was detached.
    - type: bug
      references:
        - issue: 48593
        - url: https://wiki.jenkins-ci.org/display/JENKINS/Features+controlled+by+system+properties
          title: Jenkins features controlled by system properties
      pull: 3200
      message: >
        Make the system property <code>hudson.consoleTailKB</code> actually work.
    - type: bug
      pull: 3198
      issue: 48505
      message: >
        Fix a performance regression in Jenkins 2.86 due to lock contention in <code>ExtensionList</code>.
    - type: bug
      pull: 3164
      issue: 48080
      message: >
        Prevent setup wizard from hanging when the two provided passwords differ, instead show a validation error.
    - type: bug
      issue: 34138
      pull: 3042
      message: >
        Prevent concurrent installation of Maven on the same node to prevent problems.
    - type: bug
      pull: 3156
      issue: 48157
      message: >
        Prevent potential <code>NullPointerException</code> when migrating the default "All View" name for a "My Views" user property.
    - type: rfe
      pull: 3155
      issue: 48349
      message: >
        Cache permission names, allowing Jenkins to recover faster after "stop-the-world" Java GC pauses.
    - type: rfe
      issue: 47429
      pull: 3150
      message: >
        Improve user lookup performance, for example from Git changelog calculation.
- version: "2.89.4"
  date: 2018-02-14
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2018-02-14/
          title: security advisory
    - type: rfe
      message: >
        Security hardening to prevent problems like SECURITY-624 in the future.
      references:
        - url: https://jenkins.io/security/advisory/2017-12-05/
          title: 2017-12-05 security advisory
        - url: https://jenkins.io/security/advisory/2018-01-22/#xss-vulnerability-in-job-configuration-forms-in-ant-plugin
          title: Ant Plugin fix in 2018-01-22 security advisory
    - type: bug
      pull: 3187
      message: >
        Update Stapler from 1.253 to 1.254 to make the form that shows up when a URL requiring <code>POST</code> is accessed using a different HTTP verb work with CSRF protection enabled.
      references:
        - issue: 34254
        - url: https://github.com/stapler/stapler/blob/master/CHANGELOG.md#1254
          title: Stapler changelog
    - type: bug
      pull: 3229
      issue: 48899
      message: >
        Do not downgrade detached plugins when upgrading Jenkins while its previous version was not properly recorded.
    - type: bug
      issue: 47439
      pull: 3166
      message: >
        The setup wizard is now resumed upon restart if it hasn't been completed yet, instead of showing the regular login screen (regression in 2.81).
    - type: rfe
      issue: 48348
      pull: 3157
      message: >
        Reduce memory usage when scheduling pipelines on big clusters.
    - type: rfe
      pull: 3143
      issue: 48350
      message: >
        Improve UI performance with long list of running builds by caching the estimated duration.
- version: "2.107.1"
  date: 2018-03-14
  lts_predecessor: "2.89.4"
  lts_baseline: "2.107"
  banner: >
    This is the first LTS release that includes <a href="https://jenkins.io/blog/2018/03/15/jep-200-lts/">the JEP-200 Remoting and XStream serialization whitelist</a>.
    This core change requires <a href="https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200">corresponding changes in many plugins</a> for them to be compatible.
    We strongly recommend that you read the <a href="/doc/upgrade-guide/2.107">LTS upgrade guide</a>, make sure you have good backups before upgrading, and validate this release in a staging environment first.
  lts_changes:

    # JEP-200
    - type: major rfe
      pull: 3120 # and 3230
      message: >
        Switch Remoting/XStream blacklist to a whitelist.
      references:
        - issue: 47736
        - url: /blog/2018/01/13/jep-200/
          title: upgrade guidelines for admins and plugin maintainers
        - url: https://wiki.jenkins.io/display/JENKINS/Plugins+affected+by+fix+for+JEP-200
          title: list of plugins known to be impacted
        # Whitelisting PRs:
        # issue: 48946
        # issue: 49000
        # issue: 49025
        # pull: 3234 # 3241, and 3245
        # pull: 3251
        # pull: 3252
        # pull: 3253 # this one has no issue, so add all to references
        # issue: 49070
        # issue: 49071
        # Original Tomcat fix:
        # issue: 49147

    # Most impactful changes first
    - type: rfe
      issue: 48463
      pull: 3185
      message: >
        Jenkins now creates XML 1.1 files to be more accepting of unusual contents.

    # NIO
    - type: major rfe
      references:
        - issue: 36088
        - issue: 39179
      pull: 3133
      message: >
        Use Java NIO library instead of native code to create and detect symbolic links and Windows junctions to improve compatibility and robustness.
    - type: rfe
      pull: 3135
      message: >
        Use Java NIO to read and write Unix file permissions by default.
        The previous behavior can be restored by setting the Java system property <code>hudson.Util.useNativeChmodAndMode</code> to <code>true</code>.
      references:
        - issue: 36088
        - url: https://wiki.jenkins-ci.org/display/JENKINS/Features+controlled+by+system+properties
          title: Jenkins features controlled by system properties
    - type: rfe
      references:
      - issue: 47324
      - issue: 48405
      pull: 3169 # and 3173
      message: >
        Improve robustness and error handling of various file operations by switching to NIO.

    # Possibly deserving of user attention
    - type: major rfe # Remoting -- multiple entries merged
      pull: 3145 # and 3120, and #3071 -- oddly enough in reverse order
      message: >
        Update Remoting from 3.14 to 3.17 to integrate multiple fixes and improvements.
      references:
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md
          title: full changelog
        - issue: 37566
        - issue: 37670
        - issue: 38696
        - issue: 46724
        - issue: 47965
        - issue: 48055
        - issue: 48130
        - issue: 48133
        - issue: 48309
        - issue: 47736
        - issue: 48686
        - issue: 27035
        - issue: 49027
    - type: rfe
      pull: 3258
      message: >
        Remove support for unbounded number of SCM polling threads.
        Previously, the default was infinite and could be set to between 10 and 100.
        Existing installations with unbounded SCM polling threads will now use the default of 10, and it is no longer possible to use a value outside of this range.
    - type: rfe
      pull: 3129
      issue: 22474
      message: >
        Do not require CSRF crumb to be provided when the request is authenticated using API token.
    - type: rfe
      pull: 3036
      message: >
        Introduce new <code>hudson.lifecycle.ExitLifecycle</code> to exit instead of restart.
      references:
        - issue: 47043
        - url: https://wiki.jenkins-ci.org/display/JENKINS/Features+controlled+by+system+properties
          title: Jenkins features controlled by system properties
    - type: rfe
      message: >
        Upgrade Executable War from 1.36 to 1.37 to allow supplying <code>jenkins.war</code> command-line arguments via standard input using the <code>--paramsFromStdIn</code> parameter.
      references:
        - pull: 3223
        - title: documentation
          url: https://github.com/jenkinsci/extras-executable-war#parameters-from-stdin

    # Misc RFEs
    - type: rfe # SSHD Module, two merged entries
      message: >
        Update SSHD Module 2.0 to 2.4 to update Apache Mina SSHD Core from 1.6.0 to 1.7.0, and fire authentication events in <tt>SecurityListener</tt>s when a user connects using SSH.
      references:
        - pull: 3278
        - pull: 3111
        - url: https://github.com/jenkinsci/sshd-module/blob/master/CHANGELOG.md
          title: SSHD module changelog
    - type: rfe
      issue: 25286
      pull: 1437
      message: >
        Export <tt>assignedLabels</tt> for agents and <tt>labelExpression</tt> for applicable job types in remote API.
    - type: rfe
      references:
        - issue: 43786 # and 49129
        - url: https://jenkins.io/blog/2018/01/21/overhaul-of-manage-jenkins-page/
          title: blog post
      pull: 2857 # and 3266
      message: >
        Re-style the Manage Jenkins page, including administrative monitors.
    - type: rfe
      pull: 3250
      message: >
        Define a minimum required version of the Remoting library (agent communication) and print warnings when an older version is connecting.
    - type: rfe
      pull: 3256
      message: >
        When Jenkins fails to load plugins, show failures that users need to take action on separate from those due to other plugins failing to load.

    # Most important fixes that might need user attention
    - type: major bug
      pull: 3196
      issue: 21017
      message: >
        Updating Jenkins jobs and views by XML left fields at their old value if not defined in the new XML.
    - type: bug
      pull: 3178
      issue: 48447
      message: >
        Fix HTTP 404 error when clicking on <em>New View</em> sidebar link from another view.
    - type: bug
      issue: 22088
      pull: 3223
      message: >
        Upgrade Executable War from 1.36 to 1.37 to prevent multiple copies of <code>winstone-*.jar</code> in the temp folder from using up disk space needlessly.
    # Task Reactor
    - type: bug
      references:
        - issue: 48725
        - url: https://github.com/jenkinsci/lib-task-reactor/blob/master/CHANGELOG.md#version-15
          title: full changelog
      pull: 3270
      message: >
        Update to task reactor version 1.5 to prevent hanging of Jenkins on startup/reload when an initialization task throws an unhandled exception.

  # Developer
    - type: rfe
      issue: 48638
      pull: 3195
      message: >
        Developer: <code>Jenkins#getInstance()</code> is now deprecated as its semantics have been a source of confusion for some time. Use <code>#get()</code> in typical cases and <code>Jenkins#getInstanceOrNull()</code> in rare cases (see Javadoc).
    - type: rfe
      issue: 47718
      pull: 3114
      message: >
        Developer: Deprecate the ambiguous <code>User#getUser(String)</code> in favor of the <code>User#getById()</code> or the new <code>User#getOrCreateByIdOrFullName()</code> methods.
    - type: rfe
      pull: 3074
      issue: 27027
      message: >
        Developer: Capture more authentication-related events in <code>SecurityListener</code>.
    - type: rfe
      pull: 3191
      message: >
        Developer: Deprecate <code>hudson.util.Service</code> in favor of Java's <code>ServiceLoader</code>.

  changes:
    - type: bug
      pull: 3313
      issue: 49543
      message: >
        Make JEP-200 serialization whitelist more reliable on old versions of Tomcat 8.
    - type: bug
      pull: 3292
      message: >
        Don't show input validation errors in optional numeric form fields (regression in 2.105).
      references:
        - issue: 49387
        - issue: 49520


# DO NOT EDIT THIS FILE DIRECTLY
# ALL CHANGES MUST GO THROUGH PULL REQUESTS
# MALFORMED FILE CONTENTS WILL BREAK THE SITE BUILD
