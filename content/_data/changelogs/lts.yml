# DO NOT EDIT THIS FILE DIRECTLY
# ALL CHANGES MUST GO THROUGH PULL REQUESTS
# MALFORMED FILE CONTENTS WILL BREAK THE SITE BUILD

- version: "2.32.1"
  date: 2016-12-24
  lts_predecessor: "2.19.4"
  lts_baseline: "2.32"
  lts_changes:
    - type: major rfe
      message: >
        Upgrade Remoting to version 3.1 with <a href="https://github.com/jenkinsci/remoting/blob/master/docs/protocols.md#jnlp4-connect">JNLP4-connect protocol</a>.
        <a href="https://github.com/jenkinsci/remoting/blob/master/docs/remoting-3-compatibility.md">Compatibility notes are available here</a>.
        Notably, it is no longer possible to use JDK 6 for the Maven project type, as communication with the Maven process uses Remoting, and it now requires Java 7.
      references:
        - issue: 37564
        - issue: 36871
        - issue: 37565
    - type: major rfe
      message: Show notification with popup on most pages when administrative monitors are active.
      issue: 38391
    - type: rfe
      message: Allow disabling/enabling administrative monitors on Configure Jenkins form.
      issue: 38301
    - type: rfe
      message: Ask for confirmation before canceling/aborting runs.
      issue: 30565
    - type: rfe
      message: Prompt user whether to add the job to the current view.
      issue: 19142
    - type: rfe
      message: >
        Allow <code>CommandInterpreter</code> build steps to set a build result as <em>Unstable</em> via the return code.
        Shell and Batch build steps now support this feature.
      issue: 23786
    - type: rfe
      message: >
        Internal: Upgrade Stapler library from 1.243 to 1.246 with fixes required for the Blue Ocean project.
        Changes are listed <a href="https://github.com/stapler/stapler/compare/stapler-parent-1.243...stapler-parent-1.246">here</a>.
      pull: 2593
  changes:
    - type: major bug
      message: >
        Prevent early deallocation of process references by Garbage Collector when starting a remote process.
        It was sometimes causing build failures with messages like <code>FATAL: Invalid object ID 184 iuota=187</code> and <code>java.lang.Exception: Object was recently deallocated</code>.
      issue: 23271
    - type: bug
      message: Redirect to login page in the case of authorisation error when checking connectivity to the Update Center.
      issue: 39741
    - type: bug
      message: >
        WinP 1.24: Native class now tries loading DLLs from the temporary location.
      issue: 20913
    - type: bug
      message: >
        WinP 1.24: WinP sometimes kills wrong processes when using <code>killRecursive()</code>.
        It was likely impacting process termination on Windows agents and sometimes leading to BSoD.
      issue: 24453
- version: "2.32.2"
  date: 2017-02-01
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-02-01/
          title: security advisory
    - type: major rfe
      message: Support displaying of warnings from the update site in the plugin manager and in administrative monitors.
      references:
        - issue: 40494
        - url: https://jenkins.io/blog/2017/01/10/security-warnings/
          title: announcement blog post
    - type: bug
      message: Correctly state that Jenkins will refuse to load plugins whose dependencies are not satisfied in plugin manager.
      issue: 40666
    - type: bug
      message: The <tt>install-plugin</tt> CLI command now correctly installs plugins when multiple file arguments are specified.
      issue: 32358
    - type: bug
      message: >
        Prevent the <code>ClassNotFoundException: javax.servlet.ServletException</code> error when invoking shell tasks on remote agents.
      issue: 40863
    - type: bug
      message: Properties were not passed to Maven command by Maven build step when the <em>Inject Build Variables</em> flag was not set.
      issue: 39268
    - type: bug
      message: Job configuration submission now does not fail when there is no parameters property.
      issue: 39700, regression in 1.637
    - type: bug
      message: Update remoting to 3.4 in order to properly terminate the channel in the case <code>Errors</code> and <code>Exception</code>s.
      issue: 39835
    - type: bug
      message: <em>Check for Updates</em> button in the Plugin Manager was hidden in the <em>Updates</em> tab when there was no plugins updates available.
      issue: 39971
    - type: bug
      message: >
        SSHD Module: Handshake was failing (wrong shared secret) 1 out of 256 times due to <a href="https://issues.apache.org/jira/browse/SSHD-330">SSHD-330</a>.
      issue: 40362
    - type: bug
      message: >
        Performance: Use bulk change when submitting Job configurations to minimize the number of sequential <code>config.xml</code> write operations.
      issue: 40435
    - type: bug
      message: Jobs were hanging during process termination on the Solaris 11 Intel platform, regression in 2.20.
      issue: 40470
    - type: bug
      message: Restore option value for setting build result to unstable when loading shell and batch build steps from disk.
      issue: 40894
    - type: rfe
      message: >
        Update to Winstone 3.2 to support ad-hoc certificate generation on Java 8 (using unsupported APIs).
        <strong>This option is deprecated and will be removed in a future release.</strong>
        We strongly recommend you create self-signed certificates yourself and use <tt>--httpsKeyStore</tt> and related options instead.
      issue: 25333
- version: "2.32.3"
  date: 2017-03-01
  changes:
    - type: bug
      message: >
        Display an informative message, rather than a Groovy exception, when <code>View#getItems</code> fails.
      issue: 41825
      pull: 2739
    - type: bug
      message: Don't try to set Agent Port when it is enforced, breaking form submission.
      issue: 41511
      pull: 2726
    - type: bug
      message: Don't add all group names as HTTP headers on "access denied" pages, possibly breaking reverse proxies due to very large headers.
      issue: 39402
      pull: 2727
    - type: bug
      message: Fix handling of the <tt>POST</tt> flag in <code>ManagementLink</code>s within the Manage Jenkins page.
      issue: 38175
      pull: 2692
    - type: bug
      message: <code>IllegalStateException</code> from Winstone when making certain requests with access logging enabled.
      issue: 37625
      pull: 2721
    - type: bug
      message: Do not fail to write a log file just because something deleted the parent directory.
      issue: 16634
      pull: 2738
- version: "2.46.1"
  date: 2017-03-29
  lts_predecessor: "2.32.3"
  lts_baseline: "2.46"
  lts_changes:
    - type: rfe
      message: >
        Update the <a href="https://github.com/jenkinsci/sshd-module">SSHD module</a> from 1.7 to 1.8.
        The change disables obsolete Ciphers: AES128CBC, TripleDESCBC, and BlowfishCBC.
    - type: rfe
      message: Enable the JNLP4 agent protocol by default.
      references:
        - issue: 40886
        - url: https://github.com/jenkinsci/remoting/blob/master/docs/protocols.md#jnlp4-connect
          title: upgrade notes
    - type: rfe
      message: >
        Allow defining agent ping interval and ping timeout in seconds. It can be done via the
        <code>hudson.slaves.ChannelPinger.pingIntervalSeconds</code> and
        <code>hudson.slaves.ChannelPinger.pingTimeoutSeconds</code>
        system properties.
      issue: 28245
    - type: rfe
      message: Print stack traces in logical order, with the most important part on top.
      pull: 1485
    - type: rfe
      message: Reduce size of Jenkins WAR file by not storing identical copies of <code>remoting.jar</code>/<code>slave.jar</code> there.
      pull: 2633
    - type: rfe
      message: Do not print warnings about undefined parameters when <code>hudson.model.ParametersAction.keepUndefinedParameters</code> property is set to <code>false</code>.
      pull: 2687
    - type: rfe
      message: Increase the <code>JENKINS_HOME</code> disk space threshold from 1 GB to 10 GB left. The warning will be shown only if more than 90% of the disk is utilized.
      issue: 40749
    - type: bug
      message: Delete obsolete pinning UI.
      issue: 34065
    - type: bug
      message: Use project-specific validation URL for SCM Trigger, so <code>H</code> is handled correctly in preview.
      issue: 26977
    - type: bug
      message: Failure to serialize a single <code>Action</code> could cause an entire REST export response to fail. Upgraded to Stapler 1.250 with a fix.
      issue: 40088
    - type: bug
      message: Add Usage Statistics section to the global configuration to make it easier to find.
      issue: 32938
    - type: bug
      message: Allow <tt>groovy</tt> CLI command via SSH CLI.
      issue: 41765

  changes:
    - type: bug
      message: >
        Prevent file descriptor leaks when Windows Service installer fails to read data from the service startup log.
      issue: 42670
      pull: 2793
    - type: bug
      message: >
        Update Remoting from 3.5 to 3.7
        in order to prevent file descriptor leaks on agents in the case of multiple connection attempts.
      references:
        - url: https://github.com/jenkinsci/remoting/blob/master/CHANGELOG.md#37
          title: full changelog
      issue: 42371
      pull: 2773
    - type: bug
      message: Exceptions during Jenkins cleanup step should not block restart.
      issue: 42164
    - type: bug
      message: Cryptic error message when loading JnlpSlaveAgentProtocol4.
      issue: 41987
    - type: bug
      message: >
        Developer: Snapshot builds of plugins that had dependencies on other snapshot builds were not having their version numbers compared correctly.
      issue: 41899
    - type: bug
      message: Do not attempt to find the next occurrence of an impossible date such as June 31st in validation of trigger schedules.
      issue: 41864
      pull: 2759
    - type: bug
      message: >
        Remoting 3.5: Stability improvements.
      references:
        - issue: 41513
        - issue: 41852
    - type: bug
      message: Remove invalid translations in Slovene
      issue: 41756
      pull: 2767
    - type: rfe
      message: >
        Remoting 3.5: Add option to specify the remoting protocol to use on the client.
      issue: 41730
    - type: bug
      message: Use of the remote API to create items in views (<tt>/view/â€¦/createItem</tt>) didn't actually add items to views since Jenkins 2.22.
      issue: 41128
      pull: 2760
    - type: bug
      message: >
        Remoting 3.5: Remoting clients now accept lowercase (HTTP 2) headers sent by reverse proxies.
      issue: 40710
    - type: bug
      message: Windows service restart did not retain build queue.
      issue: 32820
- version: "2.46.2"
  date: 2017-04-26
  changes:
    - type: security
      message: Important security fixes.
      references:
        - url: https://jenkins.io/security/advisory/2017-04-26/
          title: security advisory
    - type: major rfe
      message: >
        Non-Remoting-based CLI.
      references:
        - issue: 41745
        - pull: 2795
        - url: /blog/2017/04/11/new-cli/
          title: announcement blog post
    - type: rfe
      message: >
        Disable SSH server by default.
      issue: 33595
    - type: bug
      message: <code>Computer#addAction</code> would throw an <code>UnsupportedOperationException</code> since Jenkins 2.30. Such a call site was released in SSH Slaves Plugin 1.15 for SECURITY-161.
      references:
        - issue: 42969
        - url: https://jenkins.io/security/advisory/2017-03-20/
          title: security advisory including SECURITY-161
      pull: 2819
    - type: bug
      message: Search results page did not correctly encode query parameters.
      issue: 42390
      pull: 2781
    - type: bug
      message: >
        When validating a cron expression, consider the specified time zone.
      pull: 2824
      issue: 43228
    - type: bug
      message: >
        Do not display a warning when an SCM trigger has no schedules (either to disable SCM post-commit hooks, or to enable them without polling).
      issue: 42194
      pull: 2758
    - type: bug
      message: Fix performance issue in deduplication of lists of tool installers.
      issue: 42141
      pull: 2752
- version: "2.46.3"
  date: 2017-05-25
  changes:
    - type: bug
      message: >
        If an exception is thrown while rendering an HTTP response, just log the stack trace on the server side, without trying to send an error page to the client.
      issue: 21695
      pull: 2834
    - type: bug
      message: >
        Setup wizard gets into bad state when failures like network issues happen.
      issue: 41778
      pull: 2825
    - type: bug
      message: >
        Catch and log <code>RuntimeException</code> in <code>Computer#setNode()</code> when updating the Computer list.
      issue: 42043
      pull: 2836
    - type: bug
      message: >
        Fix <tt>AccessDeniedException</tt> in "Build after other projects are built" when user has Discover permission but not Read.
      issue: 42707
      pull: 2846
    - type: bug
      message: >
        Prevent <code>NullPointerException</code> when a non-existent default view is specified in <em>Configure System</em>.
      issue: 42717
      pull: 2815
    - type: bug
      message: >
        Properly handle saving system configuration when disabling all, or all but one, administrative monitors.
      issue: 42852
      pull: 2828
    - type: bug
      message: >
        Remove links in stack traces to the <tt>stacktrace.jenkins-ci.org</tt> service that has been shut down.
      issue: 42861
      pull: 2811
    - type: bug
      message: >
        Ensure that <code>Cloud.PROVISION</code> is properly initialized during the configuration loading.
      issue: 43279
      pull: 2835
    - type: rfe
      message: >
        Migrate legacy users only once per restart to improve performance of the user retrieval logic.
      pull: 2862
      issue: 43936
    - type: bug
      message: Prevent rare <code>NullPointerException</code> if an admin user is created in the setup wizard after first disabling CSRF protection.
      pull: 2868
      issue: 44010

- version: "2.60.1"
  date: 2017-06-21
  lts_predecessor: "2.46.3"
  lts_baseline: "2.60"
  banner: >
    <strong>2.60.1 is the first Jenkins LTS release that requires Java 8 to run.</strong>
    If you're using the Maven Project type, please note that it needs to use a JDK capable of running Jenkins, i.e. JDK 8 or up.
    If you configure an older JDK in a Maven Project, Jenkins will attempt to find a newer JDK and use that automatically.
    If your SSH Slaves fail to start and you have the plugin install the JRE to run them, make sure to update SSH Slaves Plugin to at least version 1.17 (1.20 recommended).
  lts_changes:
    - type: major rfe
      message: >
        <strong>Jenkins (master and agents) now requires Java 8 to run.</strong>
      references:
        - issue: 27624
        - issue: 42709
        - pull: 2802
        - url: /blog/2017/04/10/jenkins-has-upgraded-to-java-8/
          title: announcement blog post
    - type: bug
      message: >
        Update Groovy to 2.4.8 to address memory leak issue.
        <strong><em>Pipeline: Groovy</em> needs to be upgraded to 2.28 or higher to prevent regressions.</strong>
      references:
        - issue: 33358
        - issue: 42189


    # WINDOWS SERVICES START
    - type: major rfe
      message: >
        Upgrade the Windows Agent Installer module from 1.6 to 1.7.
        This change picks major updates in Windows service management logic.
      references:
        - url: https://github.com/jenkinsci/windows-slave-installer-module/blob/master/CHANGELOG.md#17
          title: full changelog
        - url: https://github.com/jenkinsci/windows-slave-installer-module#upgrading-old-agents
          title: guide to upgrading old Windows service agents
      pull: 2765
    - type: major rfe
      message: >
        Windows services:
        Upgrade the bundled <a href="https://github.com/kohsuke/winsw">Windows Service Wrapper</a> from 1.18 to 2.0.2.
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/CHANGELOG.md
          title: full changelog
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Enable <a href="https://github.com/kohsuke/winsw/blob/master/doc/extensions/runawayProcessKiller.md">Runaway Process Killer</a>
        by default in new Agent and Master installations.
      issue: 39231
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Enable auto-upgrade of remoting on newly installed agents if they are connected by HTTPS.
      issue: 39237
      pull: 2765
    - type: rfe
      message: >
        Windows services:
        Add support of shared directories mapping in Windows agent services.
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/doc/extensions/sharedDirectoryMapper.md
          title: Shared Directory Mapper documentation
      issue: 23487
      pull: 2765
    - type: bug
      message: >
        Windows services:
        Integrate various stability and performance fixes in <a href="https://github.com/kohsuke/winsw">Windows Service Wrapper</a>
        from 1.18 to 2.0.2.
        There are many fixes around configuration options and process termination.
      pull: 2765
      references:
        - url: https://github.com/kohsuke/winsw/blob/master/CHANGELOG.md
          title: full changelog
    # WINDOWS SERVICES END

    # PACKAGING START
    - type: bug
      message: >
        Packaging:
        Do not invoke recursive <code>chown</code> in <code>JENKINS_HOME</code> during the RPM post-install step unless owned by a different user.
      issue: 23273
    # PACKAGING END

    # SEARCH START
    - type: rfe
      message: >
        Use case-insensitive search by default for new and anonymous users.
      pull: 2801
      issue: 42645
    - type: rfe
      message: >
        Searching in the Build History widget takes into account user preferences (case sensitivity by default).
      pull: 2683
    - type: rfe
      message: >
        Allow searching by build parameter values in the Build History widget.
      issue: 40718
      pull: 2683
    # SEARCH END


    - type: rfe
      message: >
        Update the Trilead SSH library to get support of new Mac, Key, and Key Exchange Algorithms.
      references:
        - issue: 33021
        - issue: 26379
        - issue: 31549
        - issue: 42959
        - issue: 43979
        - issue: 44046
      pull: 2848
      # Included issue reference to followup fix in pull 2872
    - type: rfe
      message: >
        When creating temporary files, use the <code>jenkins</code> prefix instead of the old <code>hudson</code> one.
      pull: 2778


    # LOCALIZATIONS START
    - type: rfe
      message: Update German, French and Russian localizations.
      references:
        - pull: 2777
        - pull: 2787
        - pull: 2798
    - type: rfe
      message: >
        Removed localizations with very low coverage: Albanian, Basque, Belarusian, Bengali, Esperanto, Galician, Georgian, Gujarati, Hindi, Icelandic, Indonesian, Irish, Kannada, Macedonian, Marathi, Mongolian, Occitan, Punjabi, Sinhala, Tamil, Telugu, Thai.
      pull: 2813
    # LOCALIZATIONS END

    - type: rfe
      message: >
        Internal API:
        Add the ability for <code>ItemListener</code> to veto copy operations;
        make <code>Run#compareTo</code> work across jobs;
        save <code>Jenkins</code> after calling <code>setSecurityRealm</code> or <code>setAuthorizationStrategy</code>.
      references:
        - issue: 34691
        - issue: 42319
        - pull: 2762
        - pull: 2782
        - pull: 2790
        - pull: 2805
  changes:
    - type: bug
      message: >
        Fix for <code>NullPointerException</code> while initiating some SSH connections (regression in 2.59).
      issue: 44120
      pull: 2888

# DO NOT EDIT THIS FILE DIRECTLY
# ALL CHANGES MUST GO THROUGH PULL REQUESTS
# MALFORMED FILE CONTENTS WILL BREAK THE SITE BUILD
