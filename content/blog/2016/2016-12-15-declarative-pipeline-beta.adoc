---
layout: post
title: "Declaring the Beta Release of Declarative Pipeline Syntax "
tags:
- pipeline
- newfeatures
- blueocean
author: hrmpw
---

All the way back in September, Andrew Bayer presented a link:https://www.cloudbees.com/introducing-new-way-define-jenkins-pipelines[sneak peak] of Declarative Pipeline at Jenkins World and there was much rejoicing. Although it has been available in the update center since August, we have waited to recommend it for all of your pipeline needs while we work out the kinks and solidify the syntax. This week we released version 0.71 of the link:https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Model+Definition+Plugin[_Pipeline-Model-Defintion_] plugin and wanted to crown it as the official Beta version of the Declarative Pipeline Syntax.

=== What is Declarative Pipeline?

We are calling this new syntax Declarative Pipeline to differentiate it from the existing Scripted Pipeline syntax that has always been a part of Pipeline. After listening to many Jenkins users over the last year we felt that, although Scripted Pipeline provides tremendous power, flexibility, and extensibility, the learning curve for a DSL was steep for users new to either Jenkins or Pipeline. Beginning users wanting to take advantage of all the features provided by Pipeline and Jenkinsfiles were forced to learn the DSL or remain limited to the functionality provided by Freestyle jobs.

Declarative Pipeline enables users to connect simple, declarative blocks that define build agents (including Docker), post build actions, environment settings, credentials and all stages that make up the pipeline. It does not replace Pipeline but extends it with a pre-defined structure to lets users focus entirely on the `steps` required at each `stage` without needing to worry about scripting every aspect of the pipeline. Granular flow-control is extremely powerful and Scripted Pipeline syntax will always be part of Pipeline but it's not for everyone.  Best of all, because is is part of Pipeline, all build steps and build wrappers available in Plugins or loaded from Shared Libraries are also available as `steps` in Declarative.

=== Example

[pipeline]
----
// Declarative //
pipeline {
    // use our local dockerfile to define our build agent
    agent  dockerfile: true

    environment {
        GIT_COMMITTER_NAME = "jenkins"
        GIT_COMMITTER_EMAIL = "jenkins@jenkins.io"
    }
    // The order that sections are specified doesn't matter.
    // this will still be run after the stages even though it's specified before the stages.
    post {
        success {
            mail to:"me@example.com", subject:"SUCCESS: ${currentBuild.fullDisplayName}", body: "Yay, we passed."
        }
        failure {
            mail to:"me@example.com", subject:"FAILURE: ${currentBuild.fullDisplayName}", body: "Boo, we failed."
        }
    }
    stages {
        stage("Build") {
          steps {
            sh 'mvn clean install -Dmaven.test.failure.ignore=true'
          }
        }
        stage("Archive"){
          steps {
            archive "*/target/**/*"
            junit '*/target/surefire-reports/*.xml'
          }
        }
    }
}
----

=== How can you help?

1. Install the lastest version of the link:https://wiki.jenkins-ci.org/display/JENKINS/Pipeline+Model+Definition+Plugin[_Pipeline-Model-Defintion_] plugin.
2. Read the documentation: link:https://github.com/jenkinsci/pipeline-model-definition-plugin/wiki/getting%20started[Getting Started] and link:https://github.com/jenkinsci/pipeline-model-definition-plugin/blob/master/SYNTAX.md[Syntax overview].  (These documents will be incorporated into the Jenkins.io Documentation.)
3. Convert some of your existing Pipeline scripts into Declarative
4. Log any issues or enhancements you have link:https://issues.jenkins-ci.org/browse/JENKINS-40493[here] for the syntax, the execution, or the Documentation.
5. Ask questions. You can send questions to the link:mailto:jenkinsci-users@googlegroups.com[users mailing list] or visit the #jenkins channel on IRC.

=== How will this work with Blue Ocean?

Blue Ocean is all about pipelines in Jenkins. Running pipelines, displaying pipelines, and, soon, creating pipelines.As part of Pipeline Blue Ocean will be able to run and display Pipelines written in this new syntax just like any other Pipeline works today. However, because Declarative Pipeline includes a pre-defined structure, or model, it is now possible to create and edit pipelines with a GUI editor.

Although we plan to launch 1.0 of Declarative Pipeline before Blue Ocean is officially available we expect to have a working Beta of the Editor available to play with. The combination of a simple syntax model and an intuitive editor should make Pipeline creation a breeze.

image:/images/post-images/blueocean/pipeline-editor.png[Pipeline Editor, role=center]

=== Happy Holidays

I hope everyone has a great end of the year and a Happy New Year. With Declarative Pipeline and Blue Ocean we expect great things for Jenkins in 2017!
