---
layout: post
title: "Windows Installer Upgrades"
tags:
- windows
- platform-sig
- installers
author: vsilverman
---

The purpose of the current guide is to describe the transition from the old Jenkins Windows installer 2.235.2 (32 bit) to the new Jenkins Windows installer 2.235.3 (64 bit)

Let's take a look how Jenkins installation on Windows happened before release of this upgrade.

## Step 1

image:/images/post-images/2020-08-07-win-installers-upgrade/old_installer_1.png[Installer Startup, role=center]

It's evident that branding information is not present here.

## Step 2

image:/images/post-images/2020-08-07-win-installers-upgrade/old_installer_2.png[Installation Directory, role=center]

Not much branding information here as well.

## Step 3

image:/images/post-images/2020-08-07-win-installers-upgrade/old_installer_3.png[Install It, role=center]

The previous installer gave only one option for installing Jenkins - just selecting the destination folder.

## Issues

The current installer has a few issues that the Platform SIG wanted to fix in a new install experience for users.

. The installer only supports 32-bit installations.
. The user could not select ports or user accounts to run the service on.
. The installer bundled a 32-bit version of the Java runtime instead of using a pre-existing JRE
. The installer did not support Java 11
. The JENKINS_HOME directory was not placed in a good spot for modern Windows
. There is no branding in the installer

## Road Forward

The new Jenkins Windows Installer resolves most of the outlined issues!

. The new installer will only support 64-bit systems going forward. This is the vast majority of Windows systems these days, so this will help more users install Jenkins using the installer package
. The user is now able to enter user information for the service and select the port that Jenkins will use and verify availability of the port
. The installer no longer bundles a JRE, but will search for a compatible JRE on the system. If the user wants to use a different JRE, it may be specified during install
. The installer supports Java 11
. The JENKINS_HOME directory is placed in the LocalAppData directory for the user that the service will run as, this aligns with modern Windows file system layouts
. The installer has been updated with branding to make it look nicer and provide a better user experience

## Screenshots

You may see below the sequence of screenshots for the new installer:

### Step 1

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_1.png[Installer Startup, role=center]

We can see now the Jenkins logo as a prominent part of the installer UI.

### Step 2

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_2.png[Installation Directory, role=center]

Now the Jenkins logo and name are in the header during entire process of installation.

### Step 3

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_3.png[Account Selection, role=center]

Now the installer allows both specifying and testing your credentials by validating that the account has LogonAsService rights.

### Step 4

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_4.png[Port Selection, role=center]

Now the installer also allows specifying the port that Jenkins should run on and will not continue until a valid port is entered and tested.

### Step 5

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_5.png[JRE Selection, role=center]

Now instead of bundling a JRE, the installer searches for a compatible JRE on the system (in the current search no JRE was installed).
In case you would like to use a different JRE from the one found by the installer, you can browse and specify it.
Only Java 8 and Java 11 runtimes are supported.
In case the selected JRE is found to be version 11 the installer will automatically add the necessary arguments and additional jar files for running under Java 11.

### Step 6

image:/images/post-images/2020-08-07-win-installers-upgrade/new_installer_6.png[Install It, role=center]

All of the items that users can enter in the installer should be overridable on the command line for automated deployment as well. The full list of properties that can be overridden will be available soon.

## Next Steps
Windows users have alternatives for their existing Jenkins installations:

Upgrade from inside Jenkins::
The "Manage Jenkins" section of the running Jenkins will continue to include an "Upgrade" button for Windows users.
You may continue to use that "Upgrade" button to update the Jenkins installation on your Windows computer.
Upgrade from inside Jenkins will continue to use the current Java version.
Upgrade from inside Jenkins will continue to use the current installation location.

Upgrade with the new Jenkins MSI installer::
If you run the new Jenkins MSI installer on your Jenkins that was installed with the old Jenkins MSI installer, it will ... fill in the blanks ...
After the new Jenkins MSI installer has run, the "Manage Jenkins" section of the running Jenkins will continue to include an "Upgrade" button for Windows users.
You may continue to use that "Upgrade" button to update the Jenkins installation on your Windows computer.
Upgrade from inside Jenkins will continue to use the Java version selected when the new Jenkins MSI installer ran.
Upgrade from inside Jenkins will continue to use the new installation location.
