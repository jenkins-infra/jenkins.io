-# Builds a left-side Table of Contents for blog posts.
-# Scans rendered headings inside the blog article and populates
-# the existing .blog-toc container.

:javascript
  document.addEventListener('DOMContentLoaded', function () {
    // Prefer explicit blog-content wrapper, fallback to app-post-page
    var content =
      document.querySelector('.blog-content') ||
      document.querySelector('.app-post-page');

    if (!content) {
      return;
    }

    // Collect major headings
    var headings = content.querySelectorAll('h2, h3, h4');
    if (headings.length === 0) {
      return;
    }

    // Use existing ToC list container
    var list = document.querySelector('#blog-toc-list');
    if (!list) {
      return;
    }

    // Clear existing items (prevents duplicates on hot reload)
    list.innerHTML = '';

    headings.forEach(function (heading) {
      // Skip headings without ID
      if (!heading.id) {
        return;
      }

      var li = document.createElement('li');
      li.className = 'toc-' + heading.tagName.toLowerCase();

      var anchor = document.createElement('a');
      anchor.href = '#' + heading.id;
      anchor.textContent = heading.textContent;

      li.appendChild(anchor);
      list.appendChild(li);
    });
  });